<!DOCTYPE html>
<html lang="en">
<head>
          <title>bharadwaj.machiraju</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8" />
        <link href="http://tunnelshade.in/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="bharadwaj.machiraju Full Atom Feed" />


    <meta name="tags" content="tricks" />
    <meta name="tags" content="linux" />


        <!-- CSS -->
        <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">
        <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css" integrity="sha384-b92sF+wDNTHrfEtRaYo+EpcA8FUyHOSXrdxKc9XB9kaaX1rSQAgMevW6cYeE5Bdv" crossorigin="anonymous">
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <link rel="stylesheet" href="http://tunnelshade.in/theme/css/main.css">
        <!-- End CSS -->
  <link rel="stylesheet" href="http://tunnelshade.in/theme/css/blog.css">

        <!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-40078808-2', 'tunnelshade.in');
  ga('send', 'pageview');
</script></head>

<body id="index" class="home">
  <div class="pure-g">
    <div class="pure-u-2-24"></div>
    <div class="pure-u-20-24">
      <div class="pure-g">
        <div class="pure-u-1">
          <header id="banner" class="body">
            <h1>
              <a href="http://tunnelshade.in/">bharadwaj.machiraju </a>   &raquo; <a href="http://tunnelshade.in/blog/index.html">Blog</a> <a href="http://tunnelshade.in/feeds/all.atom.xml"><i class="fa fa-rss"></i></a>
            </h1>
          </header><!-- /#banner -->
        </div>
      </div>
      <div class="pure-g">
  <div class="pure-g">
    <div class="pure-u-1 pure-u-md-4-5 pure-u-lg-4-5">
<section id="content" class="body">
  <header class="pure-g"><div class="pure-u-1">
    <h2 class="entry-title">
      <a href="http://tunnelshade.in/blog/2013/09/openvpn-as-solution/" rel="bookmark"
         title="Permalink to OpenVPN - My One Ultimate solution for networking woes">OpenVPN - My One Ultimate solution for networking woes</a></h2>
  </div></header>
  <footer class="pure-g"><div class="pure-u-1">

    <time class="published" datetime="2013-09-14T00:00:00+05:30">
      [14-09-13]
    </time>

    [<a href="/category/linux/">Linux</a>]

    [tricks,linux]

  </div></footer><!-- /.post-info -->
  <div class="pure-g"><div class="pure-u-1">
    <p>Let me start by explaining the crap I deal with :-</p>
<ul>
<li>In my university, we have to use a proxy server (squid proxy) which has only port 80 open. Yes it is true :'(</li>
<li>Some sites like Youtube, Facebook etc.. are blocked.</li>
</ul>
<p>The above two problems gave me hell lot of trouble. I have to use proxy settings everywhere (pacman, git etc..) :(.
In some cases a simple HTTP  Proxy will not work everywhere (like IRC Clients etc..).</p>
<p>Some short term solutions I used before the real stuff :-</p>
<ul>
<li>Used <a href="http://proxychains.sourceforge.net/">proxychains</a> &amp; openssh to create a local socks proxy which I could use in places where it is supported.</li>
<li>Used <a href="http://www.vpnbook.com/">VPNBook</a> for some casual stuff.</li>
</ul>
<p>The first solution did not solve my proxy settings issue, while the second solution is really not secure :P.</p>
<p>Finally this is what I did :-</p>
<p>In single line = Arch Linux VPS + OpenVPN  = WIN : )</p>
<p>For non-geeks, here goes the full stuff :-</p>
<ul>
<li>Buy a VPS with any good linux distribution. I prefer <a href="https://www.tilaa.com/">Tilaa</a> , because of their Cheap <strong>Unlimited Bandwidth</strong> plan + Arch Linux distro template.</li>
<li>Install OpenVPN on VPS :P - Generate required certs &amp; keys for the server &amp; one client ( <a href="https://wiki.archlinux.org/index.php/OpenVPN#Create_a_Public_Key_Infrastructure_.28PKI.29_from_scratch">Help here</a> )</li>
<li>Edit the configuration files for both server &amp; client. ( <a href="https://wiki.archlinux.org/index.php/OpenVPN#A_basic_L3_IP_routing_configuration">Again help here</a> )</li>
<li>Start the openvpn server &amp; try to connect from the client as suggested in the arch wiki.</li>
</ul>
<p><strong>NOTE:</strong> If you are behind a <strong>HTTP Proxy</strong> with <strong>basic or ntlm</strong> auth, then you can follow the steps <a href="http://openvpn.net/index.php/open-source/documentation/howto.html#http">here</a>)</p>
<ul>
<li>If everything goes fine, now you must be able to connect to your openvpn server through http proxy.</li>
</ul>
<p>Now comes the real part, with the help of openvpn we have the facility to redirect all network traffic through VPN. So if we could somehow make  the server redirect this traffic towards internet, there will be no  need to use proxy settings with all the applications in the client :).</p>
<p>For non-geeks:-</p>
<ul>
<li>Follow <a href="http://openvpn.net/index.php/open-source/documentation/howto.html#redirect">this guide</a> for adding directives in configuration files to route all client traffic through VPN.</li>
<li>Finally, on the Arch VPS enable redirection of traffic with the help of <a href="https://wiki.archlinux.org/index.php/OpenVPN#L2_Ethernet_bridging">this guide</a>. ( Be careful with iptables as <strong>MASQUERADE</strong> doesn't work with OpenVZ vps )</li>
<li>Now you must be able to connect to internet through your VPN, when your vpn is active.</li>
</ul>
<p>So there is no need to define proxy settings anywhere else because all the traffic is routed through VPN.</p>
<p>Happy ending to the story :-</p>
<ul>
<li>No need for any proxy settings anywhere else except for vpn client conf.</li>
<li>All the data is encrypted so that eavesdropping &amp; filtering is prevented.</li>
<li>No need to use Tor Anonymity network, whose exit nodes are banned in many places.</li>
</ul>
  </div></div><!-- /.entry-content -->
</section>

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://tunnelshade.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>    </div>
    <div class="pure-u-1 pure-u-md-1-5 pure-u-lg-1-5 blog_sidebar">
      <strong>Categories</strong>
      <ul>
          <li><a href="/category/bugs/">Bugs</a> [6]</li>
          <li><a href="/category/hacks/">Hacks</a> [2]</li>
          <li><a href="/category/information/">Information</a> [5]</li>
          <li><a href="/category/linux/">Linux</a> [7]</li>
          <li><a href="/category/python/">Python</a> [4]</li>
          <li><a href="/category/tools/">Tools</a> [8]</li>
      </ul>

      <br>

      <strong>Tags</strong>
      <ul>
          <li><a href="/tag/tricks/">tricks</a> [11]</li>
          <li><a href="/tag/info/">info</a> [12]</li>
          <li><a href="/tag/python/">python</a> [3]</li>
          <li><a href="/tag/reversing/">reversing</a> [1]</li>
          <li><a href="/tag/tools/">tools</a> [10]</li>
          <li><a href="/tag/hacks/">hacks</a> [5]</li>
          <li><a href="/tag/conference/">conference</a> [2]</li>
          <li><a href="/tag/linux/">linux</a> [5]</li>
          <li><a href="/tag/owtf/">owtf</a> [3]</li>
          <li><a href="/tag/screenshots/">screenshots</a> [3]</li>
      </ul>

      <br>

      <strong>Author</strong>
<ul class="no_bullets">
    <li><a class="no_underline" href="https://twitter.com/tunnelshade_"><i class="fa fa-twitter"></i> @tunnelshade_</a></li>
    <li><a class="no_underline" href="https://github.com/tunnelshade"><i class="fa fa-github"></i> Github</a></li>
    <li><a class="no_underline" href="https://in.linkedin.com/pub/bharadwaj-machiraju/45/109/38/"><i class="fa fa-linkedin"></i> LinkedIn</a></li>
    <li><a class="no_underline" href="domain@gmail.com"><i class="fa fa-envelope"></i> domain@gmail.com</a></li>
</ul>
    </div>
  </div>
      </div>
    </div>
    <div class="pure-u-2-24"></div>
  </div>
</body>
</html>